{
  "hash": "85008f02ff6c3356e1383ea44c876fd4",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: homework6\nauthor: ohseyn\ndate: '2024-07-30'\ncategories:\n  - bigdata\n---\n\n## 데이터 불러오기 \n\n::: {#fc78d4f5 .cell execution_count=1}\n``` {.python .cell-code}\nimport seaborn as sns\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nraw_welfare = pd.read_spss(\"C:/Data/Koweps_hpwc14_2019_beta2.sav\")\nwelfare = raw_welfare.copy()\n\nwelfare = welfare.rename(\n    columns = {\"h14_g3\" :\"sex\",\n                \"h14_g4\" : \"birth\",\n                \"h14_g10\" : \"marriage_type\",\n                \"h14_g11\" : \"religion\",\n                \"p1402_8aq1\" : \"income\",\n                \"h14_eco9\" : \"code_job\",\n                \"h14_reg7\" : \"code_region\"})\nwelfare = welfare[[\"sex\", \"birth\", \"marriage_type\", \"religion\", \"income\", \"code_job\", \"code_region\"]]\n\nwelfare[\"sex\"].dtypes\nwelfare[\"sex\"].value_counts()\nwelfare[\"sex\"].isna().sum() \nwelfare[\"sex\"]=np.where(welfare[\"sex\"]==1, \"male\", \"female\") \nsns.countplot(data = welfare, x = \"sex\")\nplt.show()\nplt.clf()\n```\n\n::: {.cell-output .cell-output-display}\n![](homework6_files/figure-html/cell-2-output-1.png){width=601 height=429}\n:::\n\n::: {.cell-output .cell-output-display}\n```\n<Figure size 672x480 with 0 Axes>\n```\n:::\n:::\n\n\n## 그래프\n\n::: {#d8888bf7 .cell execution_count=2}\n``` {.python .cell-code}\nwelfare[\"income\"].describe() \nwelfare[\"income\"].isna().sum() \nwelfare[\"income\"]=np.where(welfare[\"income\"] == 9999, np.nan, welfare[\"income\"])\n\nsex_income = welfare.dropna(subset = \"income\")\\\n            .groupby(\"sex\", as_index=False)\\\n            .agg(mean_income=(\"income\", \"mean\"))\nsns.barplot(data = sex_income, x = \"sex\", y =\"mean_income\") \nplt.show()\nplt.clf()\n```\n\n::: {.cell-output .cell-output-display}\n![](homework6_files/figure-html/cell-3-output-1.png){width=593 height=429}\n:::\n\n::: {.cell-output .cell-output-display}\n```\n<Figure size 672x480 with 0 Axes>\n```\n:::\n:::\n\n\n## 숙제: 위 그래프에서 각 성별 95% 신뢰구간 계산 후 그리기. 위 아래 검정색 막대기로 표시\n\n::: {#500ee141 .cell execution_count=3}\n``` {.python .cell-code}\nfrom scipy.stats import norm\n\nmy_df = welfare.dropna(subset = \"income\")\\\n            .groupby(\"sex\", as_index = False)\\\n            .agg(mean = (\"income\",\"mean\"),\n             std = (\"income\",\"std\"),\n             n = (\"sex\",\"count\"))\n\nmy_df[\"bottom_ci\"] = my_df[\"mean\"] - 1.96*my_df[\"std\"]/np.sqrt(my_df[\"n\"])\nmy_df[\"upper_ci\"] = my_df[\"mean\"] + 1.96*my_df[\"std\"]/np.sqrt(my_df[\"n\"])\nplt.errorbar(my_df[\"sex\"], my_df[\"mean\"], yerr=1.96 * my_df[\"std\"] / np.sqrt(my_df[\"n\"]), \n             fmt='none', c='black', capsize=5)\nsns.barplot(data = my_df, x = \"sex\", y =\"mean\") \nplt.show()\nplt.clf()\n```\n\n::: {.cell-output .cell-output-display}\n![](homework6_files/figure-html/cell-4-output-1.png){width=593 height=429}\n:::\n\n::: {.cell-output .cell-output-display}\n```\n<Figure size 672x480 with 0 Axes>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "homework6_files"
    ],
    "filters": [],
    "includes": {}
  }
}